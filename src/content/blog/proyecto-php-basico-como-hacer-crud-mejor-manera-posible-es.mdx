---
title: "Proyecto PHP b√°sico: ¬øC√≥mo hacer un CRUD de la mejor manera posible?"
description: "Aprende qu√© es un CRUD y c√≥mo implementarlo en PHP siguiendo las mejores pr√°cticas de desarrollo web."
excerpt: "Aprende qu√© es un CRUD y c√≥mo implementarlo en PHP siguiendo las mejores pr√°cticas de desarrollo web."
category: "desarrollo web"
tags: ["php", "crud", "mysql", "pdo", "tutorial", "backend", "base de datos"]
author: "fcoterroba"
date: "2021-08-04"
readTime: "15 min"
featured: false
coverImage: "/blog/covers/php-crud-practicas.jpg"
lang: "es"
---

Hola mundo! Mi nombre es Francisco, fcoterroba en Internet y hoy os traigo un post en el que vamos a hablar, te√≥rica y pr√°cticamente, qu√© es y c√≥mo se realiza un CRUD en el lenguaje back-end web m√°s usado en la actualidad, PHP.

Realizar un CRUD, indistintamente del lenguaje de programaci√≥n usado, es uno de los puntos m√°s b√°sicos que deberemos saber hacer para empezar a considerarnos desarrolladores. Si ahora mismo no sabes qu√© es un CRUD, no te preocupes, en breves te voy a explicar qu√© es.

Antes de comenzar con esto, quiz√°s deber√≠as comenzar a toquetear PHP siguiendo el tutorial que sub√≠ hace unos meses en el que aprendimos a realizar la captura de formularios usando PHP adem√°s de usar el servicio Captcha de Google. Puedes leer el post completo [aqu√≠](https://fcoterroba.com/php-que-como-hacer-formularios-bonitos-con-y-sin-captcha).

Por supuesto, antes de comenzar a desarrollar en PHP, necesitaremos un servidor web habilitado con PHP y MySQL, para ello puedes instalar XAMPP en cualquier sistema operativo o bien seguir [mi tutorial](https://fcoterroba.com/como-crear-un-servidor-web-local-en-windows) si prefieres la opci√≥n nativa de Windows.

Antes de comenzar, aunque posteriormente te voy a explicar qu√© es, te recomiendo visitar un post que sub√≠ hace m√°s de un mes, en el que explico muchos de los t√©rminos inform√°ticos m√°s usados en nuestro d√≠a a d√≠a. Ya que, en este post, ver√°s palabras que probablemente no te suenen mucho. ü§Ø **[Puedes leer el post aqu√≠](https://fcoterroba.com/diccionario-tecnologico-informatico)**.

Tambi√©n quiero recordarte que hace unos meses sub√≠ un v√≠deo a mi canal de YouTube, muy interesante, enfocado en la dom√≥tica del hogar. Concretamente, conectamos, configuramos e instalamos una bombilla inteligente üí° con la que puedes cambiar el color de la misma, apagarla, encenderla y much√≠simo m√°s simplemente haciendo uso de tu tel√©fono m√≥vil y/o asistentes de voz c√≥mo Google, Alexa, etc√©tera. üëáüèª

<iframe src="https://www.youtube.com/embed/RiCPuDhFbwI" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen width="100%" height="315" frameborder="0"></iframe>

Ahora s√≠ que s√≠, comencemos üëá

**¬øQu√© es un CRUD?**

Seg√∫n Wikipedia, en Inform√°tica, CRUD es un acr√≥nimo que se refiere a las funciones b√°sicas en las bases de datos.

Este acr√≥nimo fue popularizado por primera vez por James Martin en 1980 en su libro *Managing the Data-base Enviroment*.

CRUD -> Create, Read, Update and Delete. Crear, Leer, Actualizar y Borrar.

![CRUD diagram](/blog/covers/wordpress_to_astro_ES.jpg)

En pocas palabras, CRUD resume las funciones requeridas por un usuario para crear y gestionar datos. Cualquier aplicaci√≥n web que trabaje, en mayor o menor medida con datos, har√° uso de este acr√≥nimo.

Y es por eso que es tan importante saber qu√© es y c√≥mo hacerlo.

**1Ô∏è‚É£ PRIMER PASO 1Ô∏è‚É£**

Lo primero que deberemos hacer es abrir nuestro servidor web encendiendo tanto el m√≥dulo de PHP como el de MySQL o el gestor de bases de datos que usemos. En mi caso ser√° MySQL. Todo esto est√° montado en un LAMP con php 7.4.18 con MySQL 8.0.23 en Linux Mint 20.1 Cinnamon.

Posteriormente vamos a crear una carpeta dentro del servidor web que se llame, por ejemplo, **crud_php**

Una vez hecho esto, podemos crear los cuatro archivos necesarios en un principio: **create.php, read.php, update.php, delete.php** vac√≠os de momento.

Tambi√©n, como plus de buenas pr√°cticas, vamos a crear un archivo llamado **conn.php**. Explicar√© posteriormente su uso.

Nos deber√° quedar algo m√°s o menos as√≠:

**2Ô∏è‚É£ SEGUNDO PASO 2Ô∏è‚É£**

Vamos a empezar a editar el archivo conn ya que, como he dicho antes, es una buena pr√°ctica aislar todo el c√≥digo posible en funciones, objetos y dem√°s. Por lo que, vamos a usar este script para hacer una conexi√≥n a la base de datos.

Este script tiene solamente 10 l√≠neas de c√≥digo incluyendo el try/catch y salidas de mensaje.

```php
<?php

try {

  ## Creamos la variable $dbh que es la conexi√≥n completa a la base de datos, pas√°ndole

  # los par√°metros de conexi√≥n del host, la base de datos, el usuario y la contrase√±a

    $dbh = new PDO("mysql:host=127.0.0.1;dbname=crud_example_php", "fcoterroba", "Password123#@!");

} catch (PDOException $e){

    $dbh = $e->getMessage();

}

?>
```

Una vez que hayamos hecho esta conexi√≥n y hayamos comprobado que funciona (podemos ponerle echos en el try y en el catch), vamos con el siguiente paso.

**3Ô∏è‚É£ TERCER PASO 3Ô∏è‚É£**

Para el tercer paso vamos a necesitar datos, por lo que vamos a crear una tabla sencilla con un ID autoincremental, nombre y apellidos. Lo m√°s b√°sico.

```sql
-- Poner el nombre de la tabla
CREATE TABLE main_data(
  -- A√±adir un campo ID para controlar, que no pueda ser NULL y que se autoincremente en cada registro
  ID int NOT NULL AUTO_INCREMENT,
  -- Nombre y apellidos de tipo texto y m√°ximo 255
  nombre VARCHAR(255),
  apellidos VARCHAR(255),
  -- Indicamoss que la clave primaria de la tabla es el ID
  PRIMARY KEY (ID)
);
```

Una vez creado, vamos a a√±adir un poco de informaci√≥n.

```sql
INSERT INTO main_data (nombre, apellidos) VALUES ("Nuria del Mar", "Lara Molina");
INSERT INTO main_data (nombre, apellidos) VALUES ("Adolfo", "Borras");
INSERT INTO main_data (nombre, apellidos) VALUES ("Cayetano", "Montero");
INSERT INTO main_data (nombre, apellidos) VALUES ("Susi", "Pote");
INSERT INTO main_data (nombre, apellidos) VALUES ("Susana", "Oria");
INSERT INTO main_data (nombre, apellidos) VALUES ("Javier", "Arnau");
INSERT INTO main_data (nombre, apellidos) VALUES ("Leonardo", "Messi");
INSERT INTO main_data (nombre, apellidos) VALUES ("Cristiano", "Ronaldo");
```

**4Ô∏è‚É£ CUARTO PASO 4Ô∏è‚É£**

Ahora s√≠ que s√≠, vamos a empezar con el CRUD, concretamente con la R, la lectura, el read.

Vamos a abrir nuestro fichero **read.php** y posteriormente vamos a incluir el archivo con la conexi√≥n, **conn.php.**

A continuaci√≥n, vamos a crear una tabla con tags de html que llegue solamente al encabezado.

Posteriormente, el resto de filas de la tabla las generaremos a medida que vayamos haciendo la consulta.

Para ello usamos la funci√≥n **prepare** de nuestra conexi√≥n y le pasamos entre par√©ntesis la consulta SQL que queremos hacer.

Posteriormente, debemos ejecutar dicha consulta y usaremos un bucle para extraer toda la info usando las flechas -> como si de un objeto se tratara.

```php
<!DOCTYPE html>
<html>
<head>
	<title>cRud - @fcoterroba.com</title>
</head>
<body>
	<h1>cRud - Read - Lectura</h1>
	<?php

	include 'conn.php';

	

	?>
	<table>
		<tr>
			<th>ID</th>
			<th>Nombre</th>
			<th>Apellidos</th>
		</tr>
	<?php
		$get_all = $dbh->prepare("SELECT * FROM main_data");
		$get_all->execute();
		while($fila = $get_all->fetch(PDO::FETCH_OBJ)){
			echo "<tr><td>$fila->ID</td><td>$fila->nombre</td><td>$fila->apellidos</td></tr>";
		}
	?>
	</table>
</body>
</html>
```

Si le metemos un poquito de estilos nos quedar√° algo as√≠:

![Vista de lectura](/blog/covers/wordpress_to_astro_ES.jpg)

**5Ô∏è‚É£ QUINTO PASO 5Ô∏è‚É£**

Vamos a hacer ahora la parte de crear y a√±adir datos. La C de create.

Para esta parte, abriremos el fichero **create.php** y le a√±adimos un formulario con action vac√≠o y m√©todo POST adem√°s de dos entradas de texto, una para el nombre y otra para el apellido. El ID no se a√±ade porque es algo que se tendr√≠a que ejecutar autom√°ticamente.

Una vez hecho, vamos a ir debajo del encabezado y en el caso de que hayamos recibido datos por POST (tanto el nombre como el apellido), a√±adimos el archivo de conexi√≥n y realizamos la consulta con su respectiva ejecuci√≥n.

Esto nos quedar√° m√°s o menos as√≠:

```php
<!DOCTYPE html>
<html>
<head>
	<title>Crud - @fcoterroba.com</title>
</head>
<body>
	<h1>Crud - Create - Crear</h1>
	<?php

	if (!empty($_POST['name']) && !empty($_POST['apellidos'])) {

		include 'conn.php';

		$nombre = $_POST['name'];

		$apellidos = $_POST['apellidos'];

		$insert_data = $dbh->prepare("INSERT INTO main_data (nombre, apellidos) VALUES ('$nombre', '$apellidos')");

		$insert_data->execute();

	}

	?>
	<form action="" method="POST">
		Escriba su nombre:
		<br>
		<input type="text" name="name" placeholder="Escriba su nombre" required>
		<br>
		Escriba sus apellidos:
		<br>
		<input type="text" name="apellidos" placeholder="Escriba sus apellidos" required>
		<br>
		<input type="submit" value="Crear usuario">
	</form>
</body>
</html>
```

A√±adiendo un poco de estilos, una librer√≠a de alertas y dem√°s, nos dejar√≠a algo as√≠:

![Vista de creaci√≥n](/blog/covers/wordpress_to_astro_ES.jpg)

**6Ô∏è‚É£ SEXTO PASO 6Ô∏è‚É£**

Pen√∫ltimo paso antes de finalizar nuestro CRUD. La U de update, actualizar.

Lo primero que vamos a hacer es abrir el fichero **update.php** y mostrar, de manera similar al read.php, todos los valores de la tabla a√±adi√©ndole un campo m√°s que sea un bot√≥n por cada registro d√≥nde entonces procederemos a editar los valores.

Una vez hecha la tabla, vamos a hacer que cada bot√≥n redirija a esa misma p√°gina pero a√±adiendo un GET con el ID del registro a modificar.

Cuando se haya recargado la p√°gina, mostramos los valores actuales en nombre y apellidos permitiendo al usuario que lo modifique a su gusto y posteriormente un bot√≥n de enviar, enviando datos por POST a esa misma p√°gina y entonces haremos la query.

El c√≥digo es algo m√°s o menos as√≠:

```php
<!DOCTYPE html>
<html>
<head>
	<title>crUd - @fcoterroba.com</title>
</head>
<body>
	<h1>crUd - Update - Actualizar</h1>
	<?php

	include 'conn.php';

	if(!empty($_POST['nombre']) && !empty($_POST['apellidos'])){



		$id = $_GET['id'];

		$name = $_POST['nombre'];

		$apellidos = $_POST['apellidos'];



		$get_all = $dbh->prepare("UPDATE main_data SET nombre = '$name', apellidos = '$apellidos' WHERE ID = '$id'");

		$get_all->execute();



		header('Location: http://localhost/prueba_CRUD/update.php');



	}else if (!empty($_GET['id'])) {

		$id = $_GET['id'];

		echo "<form action='' method='POST'>";

		$get_all = $dbh->prepare("SELECT * FROM main_data WHERE ID = '$id'");

		$get_all->execute();

		while($fila = $get_all->fetch(PDO::FETCH_OBJ)){

			echo "Nombre a modificar: <input type='text' value='$fila->nombre' name='nombre'><br>Apellidos a modificar: <input type='text' value='$fila->apellidos' name='apellidos'>";

		}

		echo "<br><input type='submit' value='Actualizar datos'></form>";

	}else{

		echo "<table>

		<tr>

			<th>ID</th>

			<th>Nombre</th>

			<th>Apellidos</th>

			<th>Actualizar</th>

		</tr>";

	

		$get_all = $dbh->prepare("SELECT * FROM main_data");

		$get_all->execute();

		while($fila = $get_all->fetch(PDO::FETCH_OBJ)){

			echo "<tr><td>$fila->ID</td><td>$fila->nombre</td><td>$fila->apellidos</td><td><button id='boton' onclick='prueba($fila->ID);'>Actualizar</button></td></tr>";

		}

		echo "</table>";

		}

		?>

	<script type="text/javascript">

		function prueba(id){

			window.location.replace("http://localhost/prueba_CRUD/update.php?id="+id);

		}

	</script>
</body>
</html>
```

A√±adiendo un poquito de estilos, el proceso completo ser√≠a el siguiente:

![Vista de actualizaci√≥n](/blog/covers/wordpress_to_astro_ES.jpg)

**7Ô∏è‚É£ S√âPTIMO PASO 7Ô∏è‚É£**

Para el √∫ltimo paso y ya acabamos con el post y nuestro CRUD b√°sico realizado con buenas pr√°cticas, vamos a hacer la opci√≥n de borrar, el Delete.

Lo primero que vamos a hacer es abrir el fichero **delete.php** y mostrar, de manera similar al read.php, todos los valores de la tabla a√±adi√©ndole un campo m√°s que sea un bot√≥n con una X para indicar que vamos a borrar ese registro.

Se puede plantear de muchas maneras distintas pero voy a plantearlo similar al anterior paso. El bot√≥n cambiar√° la ubicaci√≥n a esta misma pero a√±adiendo el ID por GET y el script ejecutar√° la query en cuanto la reciba.

Nos faltar√≠a a√±adirle un poco de confirmaci√≥n por si el usuario le ha dado sin querer. Te dejo que lo a√±adas t√∫ mismo!

El c√≥digo se quedar√≠a m√°s o menos as√≠:

```php
<!DOCTYPE html>
<html>
<head>
	<title>cruD - @fcoterroba.com</title>
</head>
<body>
	<?php

	include 'conn.php';

	



	if(!empty($_GET['id'])){

		$id = $_GET['id'];



		$get_all = $dbh->prepare("DELETE FROM main_data WHERE ID = '$id'");

		$get_all->execute();



		header('Location: http://localhost/prueba_CRUD/delete.php');







	}



	?>

	<h1>cruD - Delete - Borrar</h1>

	<table>

		<tr>

			<th>ID</th>

			<th>Nombre</th>

			<th>Apellidos</th>

			<th>Borrar</th>

		</tr>

	<?php

			$get_all = $dbh->prepare("SELECT * FROM main_data");

		$get_all->execute();

		while($fila = $get_all->fetch(PDO::FETCH_OBJ)){

			echo "<tr><td>$fila->ID</td><td>$fila->nombre</td><td>$fila->apellidos</td><td><button onclick='borra($fila->ID);'>‚ùå</button></td></tr>";

		}

	?>

	</table>

	<script type="text/javascript">

		function borra(id){

			window.location.replace("http://localhost/prueba_CRUD/delete.php?id="+id);

		}

	</script>
</body>
</html>
```

A√±adiendo estilos se quedar√≠a as√≠:

![Vista de borrado](/blog/covers/wordpress_to_astro_ES.jpg)

Y poco m√°s que a√±adir chic@s, espero que hay√°is aprendido mucho a ra√≠z de este post! Saber qu√© es y c√≥mo hacer un CRUD correctamente es la base de cualquier programador, especialmente del backend.

Por √∫ltimo, recordarte que si te gusta mi contenido y quieres contribuir econ√≥micamente (ya que no gano nada de Adsense), puedes mandarme la cantidad que quieras por [Paypal](https://www.paypal.com/paypalme/fcoterroba). Toda cantidad es bien recibida! üôÇ

Espero tambi√©n que teng√°is una genial semana y nos vemos por aqu√≠ dentro de poquito! Un saludo y recuerda seguirme en las redes como [Twitter](https://twitter.com/fcoterroba), [Facebook](https://www.facebook.com/fcoterroba), [Instagram](https://www.instagram.com/fcoterroba/), [GitHub](https://www.github.com/fcoterroba) y [LinkedIn](https://www.linkedin.com/in/fcoterroba/). ü§üüèª

**Fuentes:** [IONOS.ES](https://www.ionos.es/digitalguide/paginas-web/desarrollo-web/crud-las-principales-operaciones-de-bases-de-datos/), [Wikipedia](https://es.wikipedia.org/wiki/CRUD), [diego.com.es](https://diego.com.es/tutorial-de-pdo)

