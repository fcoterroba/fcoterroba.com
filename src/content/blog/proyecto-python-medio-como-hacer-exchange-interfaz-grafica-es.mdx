---
title: "Proyecto Python medio: ¬øC√≥mo hacer un exchange con interfaz gr√°fica?"
description: "Aprende a crear un conversor de monedas (exchange) con interfaz gr√°fica en Python usando tkinter y una API de tasas de cambio en tiempo real."
excerpt: "Aprende a crear un conversor de monedas (exchange) con interfaz gr√°fica en Python usando tkinter y una API de tasas de cambio en tiempo real."
category: "programaci√≥n de software"
tags: ["python", "tkinter", "gui", "exchange", "api", "conversor", "monedas", "tutorial", "programaci√≥n"]
author: "fcoterroba"
date: "2020-09-14"
readTime: "15 min read"
featured: false
coverImage: "/blog/covers/python-wallpaper-rules.jpg"
lang: "es"
---

Hola mundo üëãüèª mi nombre es Francisco, fcoteroba en Internet y hoy os vuelvo a traer un post en el que vamos a realizar otro proyecto en nuestro querido y amado üíö lenguaje de programaci√≥n Python üêç.

Este proyecto es algo m√°s complejo de los dos anteriores realizados ya en la web.
Si no los has visto ya, te recomiendo verlos antes de proseguir con este: [¬øC√≥mo hacer una calculadora en la consola de comandos?](https://fcoterroba.com/proyecto-python-principiantes-calculadora) as√≠ c√≥mo el proyecto que hicimos [para generar c√≥digos QR.](https://fcoterroba.com/proyecto-python-principiantes-generar-codigo-qr)

Antes de comenzar, aunque posteriormente te voy a explicar qu√© es, te recomiendo visitar un post que sub√≠ hace m√°s de un mes, en el que explico muchos de los t√©rminos inform√°ticos m√°s usados en nuestro d√≠a a d√≠a. Ya que, en este post, ver√°s palabras que probablemente no te suenen mucho. ü§Ø **[Puedes leer el post aqu√≠](https://fcoterroba.com/diccionario-tecnologico-informatico)**.

Tambi√©n quiero recordarte que hace unas semanas sub√≠ un v√≠deo a mi canal de YouTube, muy interesante, enfocado en la dom√≥tica del hogar. Concretamente, conectamos, configuramos e instalamos una bombilla inteligente üí° con la que puedes cambiar el color de la misma, apagarla, encenderla y much√≠simo m√°s simplemente haciendo uso de tu tel√©fono m√≥vil y/o asistentes de voz c√≥mo Google, Alexa, etc√©tera. üëáüèª

<iframe src="https://www.youtube.com/embed/RiCPuDhFbwI" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen width="100%" height="315" frameborder="0"></iframe>

Ahora s√≠ que s√≠, comencemos üëáüèª

**¬øQu√© es un exchange?**

Bueno, imagino que antes de programar una cosa, querr√°s saber qu√© es dicha cosa. Para ello, te comento lo que dice Wikipedia sobre ello:

Los exchanges, tambi√©n conocidos como plataformas o mercados de intercambio, son plataformas digitales que permiten intercambiar monedas digitales por dinero fiat y/u otras criptomonedas o mercanc√≠as.

Es una explicaci√≥n rara a la par de expl√≠cita √∫nica y exclusivamente enfocada a las criptomonedas.

Pero, en realidad, un exchange se define c√≥mo un sitio, web o (en nuestro caso) programa para introducir un valor en una determinada moneda o criptomoneda.

Y eso es lo que vamos a hacer nosotros hoy, vamos a crear una interfaz gr√°fica, o GUI por sus siglas en ingl√©s en el cual, el usuario insertar√° un valor en una determinada moneda y el programa mostrar√° su valor actual a tiempo real.

**ANTES DE COMENZAR NECESITAS SABER QUE:**

Una API (palabra que ver√°s dentro de unos instantes) es (seg√∫n la definici√≥n de la web de Red Hat) un conjunto de definiciones y protocolos que se utilizan para desarrollar e integrar el software de las aplicaciones. API significa interfaz de programaci√≥n de aplicaciones.

En resumen, una API suele ser un archivo de un programa independiente, programado √∫nica y exclusivamente para ser integrado en otras aplicaciones.

**Oye, ¬øc√≥mo haremos para que se muestre el valor actual, si esto es un mercado que var√≠a a cada segundo?**

Voy a proceder a explicarte todo, paso a paso, tal y c√≥mo hacemos siempre aqu√≠. Pero antes, te voy a ense√±ar un peque√±o GIF de lo que vas a aprender a programar leyendo este simple post! üòÅ

![GIF del exchange funcionando](https://s8.gifyu.com/images/Exchange_Python_FCOTERROBA.gif)

Ahora s√≠ que s√≠, aqu√≠ llega el primer paso 1Ô∏è‚É£.

Debemos registrarnos en [ExchangeRate-API](https://www.exchangerate-api.com/), que es una API libre, abierta y gratuita para realizar conversiones entre monedas de las m√°s variopintas.

El registro es sencillo, simplemente deberemos escribir el correo electr√≥nico al que queramos que llegue la clave gratuita y darle al bot√≥n.

![Registro en ExchangeRate-API](/blog/covers/wordpress_to_astro_ES.jpg)

Una vez que nos registremos, en nuestro dashboard aparecer√° un n√∫mero muy largo. Dicho n√∫mero es la clave del API que posteriormente vamos a usar en Python üêç.

Cuando tengamos dicho c√≥digo. Vamos a empezar por abrir nuestro IDE favorito. Que en mi caso es VSCode y empezaremos a importar los paquetes que vamos a necesitar en este proyecto. üì¶

Aunque lo digo siempre que hago un post sobre Python, recuerdo que en este lenguaje de programaci√≥n no es necesario precisar de qu√© tipo ser√° la variable (Char, float, entero,‚Ä¶), a diferencia de otros muchos lenguajes de programaci√≥n ya que, Python üêç, entender√° autom√°ticamente el tipo de variable seg√∫n lo que guardemos en √©l.

Para este proyecto vamos a importar tkinter de las siguientes formas **from tkinter import \*** y **from tkinter import ttk**. Estos dos, ser√°n obviamente, para realizar la interfaz gr√°fica del programa.
Por √∫ltimo, debemos importar tambi√©n el paquete de requests, que trabaja con p√°ginas webs para decodificar su JSON, extraer informaci√≥n y much√≠simo m√°s. El c√≥digo es **import requests.**

**MUCHO OJO üëÄ**, probablemente os d√© fallo con el paquete requests, y esto es porque hay que instalarlo primeramente en la l√≠nea de comandos usando el instalador pip. **pip install requests**

**Recordatorio üß†**
Los comentarios en Python se escriben poniendo al comienzo de la l√≠nea el s√≠mbolo **#**
Las funciones en la programaci√≥n. Las funciones, de manera resumida, es un trozo de c√≥digo que, aunque est√© escrita, nunca se accionar√° hasta que sea invocada. üßôüèª‚Äç‚ôÇÔ∏è

**TKinter** üé®
Tenemos que crear una ventana ra√≠z estableciendo un nombre antes de **Tk()**.
Posteriormente le damos el tama√±o de la ventana con **minsize(valorx, valory)**.
Establecemos un t√≠tulo para la ventana con **title("Nombre")**
Y para que ning√∫n usuario pueda ampliar o reducir el tama√±o de la ventana, estableceremos a 0 los dos par√°metros de **resizable(x,y)**.

A√±adiendo todo esto, nuestro programa comienza as√≠:

```python
from tkinter import *
from tkinter import ttk
import requests

#Definici√≥n ventana
ventana = Tk() 
ventana.minsize(500, 500)
ventana.title("Exchange realizado en Python | fcoterroba.com")
ventana.resizable(0,0)
```

Vamos a hacer ahora lo tocho, todo lo que aparecer√° en nuestra ventana principal.

1Ô∏è‚É£ Primeramente, vamos a escribir un Label a modo de t√≠tulo del programa, d√°ndole su respectiva configuraci√≥n de dise√±o y distribuci√≥n.

```python
titulo_label = Label(ventana, text="¬°Exchange de todas las monedas!")
titulo_label.config(
        fg="white",
        bg="black",
        font=("Arial", 30),
        padx=210,
        pady=20
    )
titulo_label.grid(row=0, column=0)
```

2Ô∏è‚É£ Lo segundo, establecer la entrada de texto, aunque sea un n√∫mero, Tkinter no hace distinci√≥n de ello, por lo que seremos nosotros quienes daremos una alerta si no es un n√∫mero.
La entrada de texto se almacenar√° en una variable que debemos declarar previamente. Yo lo he hecho justo en la l√≠nea de debajo de **ventana.resizable**

```python
numero_label = Label(ventana, text="Dime el n√∫mero y la moneda correspondiente")
numero_entry = Entry(ventana, textvariable=numero_data)
numero_label.grid(row=1, column=0, padx=5, pady=5)
numero_entry.grid(row=2, column=0, padx=5, pady=5)
```

3Ô∏è‚É£ La tercera parte es crear los Combobox. Estos elementos son como unas listas desplegables vistos en el desarrollo web u otros.
Para crearlas en Python debes darle un nombre seguido de **ttk.Combobox()**.
Luego, has de bloquear que el usuario pueda escribir encima de la lista con **ttk.Combobox(state="readonly")**
Por √∫ltimo, debes escribir todos los valores que quieres que aparezcan en dicho Combobox. En este caso, ser√°n todas las monedas disponibles en la API.
Esto hay que repetirlo dos veces, primero para la moneda de tu dinero y luego la moneda a la que quieras convertirla.

```python
combo = ttk.Combobox()
combo = ttk.Combobox(state="readonly")
combo["values"] = ["USD", 'AED', 'ARS', 'AUD', 'BGN', 'BRL', 'BSD', 'CAD', 'CHF', 'CLP', 'CNY', 'COP', 'CZK', 'DKK', 'DOP', 'EGP', 'EUR', 'FJD', 'GBP', 'GTQ', 'HKD', 'HRK', 'HUF', 'IDR', 'ILS', 'INR', 'ISK', 'JPY', 'KRW', 'KZT', 'MVR', 'MXN', 'MYR', 'NOK', 'NZD', 'PAB', 'PEN', 'PHP', 'PKR', 'PLN', 'PYG', 'RON', 'RUB', 'SAR', 'SEK', 'SGD', 'THB' 'TRY', 'TWD', 'UAH', 'UYU', 'ZAR']
combo.grid(row=3, column=0, padx=5, pady=5)

second_moneda = Label(ventana, text="A qu√© moneda lo quieres convertir?")
second_moneda.grid(row=4, column=0, padx=5, pady=5)

combo2 = ttk.Combobox()
combo2 = ttk.Combobox(state="readonly")
combo2["values"] = ["USD", 'AED', 'ARS', 'AUD', 'BGN', 'BRL', 'BSD', 'CAD', 'CHF', 'CLP', 'CNY', 'COP', 'CZK', 'DKK', 'DOP', 'EGP', 'EUR', 'FJD', 'GBP', 'GTQ', 'HKD', 'HRK', 'HUF', 'IDR', 'ILS', 'INR', 'ISK', 'JPY', 'KRW', 'KZT', 'MVR', 'MXN', 'MYR', 'NOK', 'NZD', 'PAB', 'PEN', 'PHP', 'PKR', 'PLN', 'PYG', 'RON', 'RUB', 'SAR', 'SEK', 'SGD', 'THB' 'TRY', 'TWD', 'UAH', 'UYU', 'ZAR']
combo2.grid(row=5, column=0, padx=5, pady=5)
```

4Ô∏è‚É£ Seguimos con el cuarto paso, que es realizar el bot√≥n con el comando de una funci√≥n que haremos en el siguiente paso. Funci√≥n que realizar√° toda la l√≥gica de la conversi√≥n y mostrar√° el resultado.
Tambi√©n, que no se nos olvide ‚ùó nuestro preciado mainloop. Para que el programa aparezca visualmente.

```python
boton = Button(ventana, text="Convertir", command=conversion)
boton.grid(row=6, column=0)
ventana.mainloop()
```

5Ô∏è‚É£ En nuestro quinto paso vamos a crear una funci√≥n con el nombre que le hemos dado a la propiedad **command** de nuestro bot√≥n. **def conversion():**
Dentro de dicha funci√≥n, vamos a hacer un try/except principalmente para cuando el usuario inserte algo distinto de n√∫meros.
**TRY**
Vamos a crear una variable para obtener la URL de la API a√±adiendole al final la moneda n√∫mero 1 con **combo.get()**.
A continuaci√≥n, creamos una variable response para que obtenga los requests de la url con **requests.get(url).**
Despu√©s, creamos otra variable data para almacenar el json de response.

**Y ahora s√≠, empezamos con las mates! üî£**
Hemos de pasar el n√∫mero que tenemos a float, creando una nueva variable.
Para finalizar debemos crear una nueva variable resultado multiplicando dicho n√∫mero float por la moneda existente en el archivo JSON.

Dicho esto, solo nos faltar√≠a establecer un dise√±o y voil√°.

**EXCEPT**
Simplemente vamos a copiar el dise√±o hecho para el resultado anterior, poniendo un texto sobre la errata y hacerlo algo m√°s llamativo.

```python
def conversion():
    try:
        url = 'https://v6.exchangerate-api.com/v6/TU-API-KEY/latest/'+combo.get()
        response = requests.get(url)
        data = response.json()
        
        numero1 = float(numero_entry.get())
        resultado = round((numero1 * data['conversion_rates'][combo2.get()]), 2)
        
        espacio = Label(ventana, text="")
        espacio.grid(row=7, column=0)
        
        resultado_label = Label(ventana, text=resultado)
        resultado_label.grid(row=8, column=0)
        resultado_label.config(
            fg="black",
            bg="white",
            font=("Arial", 20),
            padx=400,
            pady=20
        )
    except:
        espacio = Label(ventana, text="")
        espacio.grid(row=7, column=0)
        
        resultado_label = Label(ventana, text="Hay algo incorrecto. Recuerda que solo puedes escribir N√öMEROS")
        resultado_label.grid(row=8, column=0)
        resultado_label.config(
            fg="red",
            bg="black",
            font=("Arial", 20),
            padx=100,
            pady=20
        )
```

Si no nos hemos saltado ning√∫n paso, nuestro proyecto deber√≠a quedar algo m√°s o menos as√≠:

<script src="https://gist.github.com/fcoterroba/716c6387732627b4ab002ec0be6ac36a.js"></script>

Y esto ha sido todo por hoy chic@s, espero que os haya gustado este post tanto c√≥mo me ha gustado a m√≠ hacerlo, programar el proyecto y pelearme con la API! Al fin y al cabo, esto es lo bonito de programar, ¬øno cre√©is? ü§ì

Nos vemos muy pronto por aqu√≠ y ya sab√©is que pod√©is seguirme en [Twitter](https://twitter.com/fcoterroba), [Facebook](https://www.facebook.com/fcoterroba), [Instagram](https://www.instagram.com/fcoterroba/) y [LinkedIn](https://www.linkedin.com/in/fcoterroba/). ü§üüèª

