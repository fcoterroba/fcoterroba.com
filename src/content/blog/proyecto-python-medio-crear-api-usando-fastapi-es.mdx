---
title: "proyecto Python medio: ¬øc√≥mo crear una API usando FastAPI?"
description: "tutorial pr√°ctico para crear una API completa con Python y FastAPI, desde la instalaci√≥n hasta la documentaci√≥n autom√°tica."
excerpt: "aprende a crear una API REST completa con Python y FastAPI paso a paso, incluyendo endpoints, datos JSON y documentaci√≥n autom√°tica."
category: "web development"
tags: ["python", "fastapi", "api", "tutorial", "proyecto", "backend"]
author: "fcoterroba"
date: "2023-01-09"
readTime: "12 min read"
featured: false
coverImage: "/blog/covers/proyecto-python-fastapi.jpg"
lang: "es"
---

Hola mundo ü§üüèª mi nombre es Francisco, fcoterroba en Internet y hoy os traigo un post de los que suelen gustar aqu√≠ en la web. Como veis en el t√≠tulo, hoy vamos a crear una API en Python usando la librer√≠a o framework FastAPI.

Proyecto muy interesante para a√±adir a tu portafolio de desarrollador ya sea backend e incluso front-end.

Antes de comenzar, c√≥mo no pod√≠a ser de otra forma, si a√∫n no lo has visto, te recomiendo encarecidamente que vayas a ver el √∫ltimo v√≠deo que tengo en mi canal de YouTube en el que expliqu√©, de manera muy sencilla y concisa, c√≥mo realizar la instalaci√≥n de una bombilla inteligente üß† con la cual podr√°s cambiar el color del mismo, controlarla mediante tu propia voz y much√≠simo m√°s! Puedes verlo aqu√≠ üëáüèª

<iframe src="https://www.youtube.com/embed/RiCPuDhFbwI" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen width="100%" height="315" frameborder="0"></iframe>

Por √∫ltimo antes de comenzar, quer√≠a comunicar que llevo unas semanas subiendo v√≠deos a TikTok. √öltimamente son de Eurovisi√≥n dado que ya queda poco para ello pero te dejo por aqu√≠ el √∫ltimo que hice a d√≠a de hoy sobre inform√°tica.

<blockquote class="tiktok-embed" cite="https://www.tiktok.com/@fcoterroba/video/7118137831297420550" data-video-id="7118137831297420550" style="max-width: 605px;min-width: 325px;">
  <section>
    <a target="_blank" title="@fcoterroba" href="https://www.tiktok.com/@fcoterroba?refer=embed" rel="noopener noreferrer">@fcoterroba</a>
    ¬øC√≥mo hacer un peque√±o <a title="juego" target="_blank" href="https://www.tiktok.com/tag/juego?refer=embed" rel="noopener noreferrer">#juego</a> en <a title="python" target="_blank" href="https://www.tiktok.com/tag/python?refer=embed" rel="noopener noreferrer">#Python</a> ? Like para parte 2! <a title="fyp" target="_blank" href="https://www.tiktok.com/tag/fyp?refer=embed" rel="noopener noreferrer">#fyp</a> <a title="parati" target="_blank" href="https://www.tiktok.com/tag/parati?refer=embed" rel="noopener noreferrer">#parati</a> <a title="dev" target="_blank" href="https://www.tiktok.com/tag/dev?refer=embed" rel="noopener noreferrer">#dev</a> <a title="programacion" target="_blank" href="https://www.tiktok.com/tag/programacion?refer=embed" rel="noopener noreferrer">#programacion</a>
    <a target="_blank" title="‚ô¨ LoFi(860862) - skollbeats" href="https://www.tiktok.com/music/LoFi-860862-6873526724840130562?refer=embed" rel="noopener noreferrer">‚ô¨ LoFi(860862) - skollbeats</a>
  </section>
</blockquote>
<script async src="https://www.tiktok.com/embed.js"></script>

## ¬øAlgo que deba saber antes de empezar?

Pues s√≠, varias cosas realmente:

### ¬øQu√© es una API?

- Una API (abreviatura de **A**pplication **P**rogramming **I**nterfaces), es, b√°sicamente, un conjunto de definiciones y protocolos que se utilizan para desarrollar e integrar el software de las aplicaciones o webs. Permitiendo as√≠ la comunicaci√≥n entre dos aplicaciones a priori totalmente distintas.
- Una API es un sitio donde se engloba cierta informaci√≥n sobre ciertos aspectos. La cosa es que dicha informaci√≥n no es accesible y no es le√≠ble por humanos f√°cilmente.
- Por lo general, una API devuelve la informaci√≥n cuando es requerida en formato JSON y es el desarrollador en su nueva web o software, el encargado de hacer legible dicha informaci√≥n.
  - Por ejemplo, esta API gratuita de [Los Simpsons](https://thesimpsonsquoteapi.glitch.me/), si accedes a la API b√°sica, te devuelve una frase de alguno de los personajes de esta serie.

![API de Los Simpsons](/blog/python-fastapi/imagen.png)

### ¬øQu√© es Python?

- Python es un lenguaje de programaci√≥n usado en pr√°cticamente todo lo imaginable
- Desarrollo web, software, IA, ML, Data Science. Son algunos de los √°mbitos tech en los que Python es ampliamente usados.
- Ofrece una legibilidad bastante buena y cercana a la lectura humana.
  - En la categor√≠a [Python](https://fcoterroba.com/category/python) de la web puedes encontrar +8 proyectos con Python divididos por su dificultad. ¬øA qu√© esperas? Tu API puede esperar.

### ¬øQu√© es FastAPI?

- FastAPI es un framework para construir APIs de forma sencilla y r√°pida con Python.
- En los √∫ltimos tiempos se ha vuelto un framework muy popular al ser considerado como uno de los frameworks m√°s r√°pidos existentes en Python.
- Algunos benchmarks han llegado a sacar a FastAPI **mucho m√°s** por delante de Django, FLask o Pyramid.

![Comparaci√≥n de rendimiento](/blog/python-fastapi/comparacion-rendimiento.png)

## 1Ô∏è‚É£ PRIMER PASO 1Ô∏è‚É£ Instalar lo necesario

Vamos a tener en cuenta que tenemos ya instalado Python, en mi caso tengo la versi√≥n Python 3.10.7 pero no necesariamente debes tener esta versi√≥n para seguir el tutorial. Solo es recomendable que sea una versi√≥n Python 3. python 3.x.x

Lo primero que tenemos que hacer es instalar la librer√≠a de FastAPI, para ello vamos a usar el comando

```bash
pip install fastapi
```

Por √∫ltimo, necesitaremos la librer√≠a **uvicorn**, un servidor web ASGI escrito para Python. Necesitaremos esta librer√≠a para comprobar que todo est√© funcionando. Podemos instalarla con este comando:

```bash
pip install uvicorn
```

Una vez instalados, podemos empezar de verdad

## 2Ô∏è‚É£ SEGUNDO PASO 2Ô∏è‚É£ Hola mundo

Lo primero y como ya te estar√°s imaginado, es importar la librer√≠a de FastAPI, para ello lo importamos como cualquier otro:

```python
from fastapi import FastAPI
```

Luego, tendremos que crear un objeto general que, por lo normal, se le suele denominar como app

```python
app = FastAPI()
```

FastAPI funciona con funciones as√≠ncronas y muchos getters, por lo que tendremos que coger, para empezar, la ra√≠z de nuestro servidor y justo debajo declarar el mensaje de return:

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
async def root():
    return {"message": "Hello World"}
```

Con esto, si vistamos nuestro localhost (por defecto en el puerto 8000), obtendremos el json que hemos mandado para return:

![Hola mundo FastAPI](/blog/python-fastapi/imagen-1.png)

## 3Ô∏è‚É£ TERCER PASO 3Ô∏è‚É£ M√°s funciones y p√°ginas

Con el paso anterior hemos hecho un gran avance, tenemos ya nuestro servidor web funcionando, a la espera de consulta y que nos devuelve un json con lo que decimos. Est√° bien, pero falta m√°s chicha, no?

En este caso voy a hacer la prueba como si fuera a crear un API del famoso anime "Shin Chan".

Lo primero que tendremos que hacer es, de alguna forma, almacenar la informaci√≥n que querremos devolver en la API. Yo voy a almacenar los personajes principales de la serie en un JSON con su edad, una imagen, nombre, etc. Tal que as√≠:

![Datos JSON de personajes](/blog/python-fastapi/imagen-2.png)

Ahora, supongamos que queremos pasar esos cuatro personajes a la ra√≠z de nuestra API.

Para ello simplemente tendremos que convertir nuestro archivo JSON a un diccionario Python. Importamos la librer√≠a json para trabajarlo y abri√©ndolo, podemos pasar la variable usando la funci√≥n load

```python
import json

data = ""

with open('characters.json') as json_file:
    data = json.load(json_file)
```

Por √∫ltimo, en nuestro root le pasamos dicha variable y si visitamos nuestra API obtendremos dicho json

```python
@app.get("/")
async def root():
    return data
```

Si le pasamos, por ejemplo, **data[0]** le pasaremos solo el primer campo del json, **data[1]** para el segundo campo, etc.

![Resultado de la API](/blog/python-fastapi/imagen-3.png)

Ahora, todo esto que hemos hecho ha sido en el root, al acceder a la p√°gina principal de la API, supongamos que queremos que en cada p√°gina se devuelva una cierta cosa.

Para ello, tendremos que crear un getter con una funci√≥n por cada p√°gina que queramos.

Por ejemplo, digamos que quiero una p√°gina que devolver√° un personaje totalmente random por cada visita. Importamos la librer√≠a random y usamos la funci√≥n choice pas√°ndole COMO LISTA nuestro diccionario.

```python
import random

@app.get("/randomCharacter")
async def randomCharacter():
    return random.choice(list(data))
```

Otro ejemplo, supongamos que tenemos un listado con todos los ids que podemos obtener, para ello podemos pasarle un id al getter y a la funci√≥n, para devolver dicho registro.

Ten en cuenta que restamos uno porque el json empieza por 0 pero el usuario escribir√° "normal", empezando por 1.

```python
@app.get("/specificCharacter/{id}")
async def specificCharacter(id: int):
    return data[id-1]
```

## 4Ô∏è‚É£ CUARTO PASO 4Ô∏è‚É£ P√°gina principal

Ya estamos casi casi acabando, tenemos ya nuestra API b√°sica, nuestras funciones, nuestras llamadas, todo.

Pero claro, nuestro root sigue devolviendo un json, ni es est√©tico ni es sencillo ni tiene buenas pr√°cticas. Lo correcto ser√° que creemos un index.html y llamemos dicho archivo en el root.

Yo he creado este peque√±o html de 50 l√≠neas b√°sandome en una plantilla del W3Schools.

```html
<!DOCTYPE html>
<html>
    <head>
        <title>The Shin Chan API - @fcoterroba</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
        <style>
        body,h1,h2{font-family: "Raleway", sans-serif}
        body, html {height: 100%}
        p {line-height: 2}
        .bgimg {
        min-height: 100%;
        background-position: center;
        background-size: cover;
        }
        .bgimg {background-image: url("https://preview.redd.it/7fx1jell8p551.png?auto=webp&s=8ff53edc7ff4752ca0262c8a58f2d0a7efbbad61")}
        </style>
    </head>
    <body>

        <header class="w3-display-container w3-wide bgimg w3-grayscale-min" id="home">
            <div class="w3-display-middle w3-text-blue w3-center" style="background-color: white;">
                <h1 class="w3-jumbo">Shin Chan API</h1>
                <h2>The free Shin Chan API</h2>
                <h2><b>Created by @fcoterroba</b></h2>
            </div>
        </header>

        <div class="w3-container w3-padding-64 w3-pale-blue w3-grayscale-min" id="us">
            <div class="w3-content">
                <h1 class="w3-center w3-text-grey"><b>Just call it</b></h1>
                <img class="w3-round" src="https://images5.alphacoders.com/116/1166283.jpg" style="width:100%;margin:32px 0">
                <p><i>Get the full name, age and picture of your favourite characters.</i>
                </p><br>
                <p class="w3-center"><a href="#" class="w3-button w3-black w3-round w3-padding-large w3-large">Documentation</a></p>
            </div>
        </div>

    </body>
</html>
```

Una vez que tengamos el html, simplemente importamos la funci√≥n **FileResponse** de starlette.responses y lo devolvemos usando dicha funci√≥n.

```python
from starlette.responses import FileResponse 

@app.get("/")
async def root():
    return FileResponse('index.html')
```

![P√°gina principal de la API](/blog/python-fastapi/imagen-4.png)

## 5Ô∏è‚É£ QUINTO PASO 5Ô∏è‚É£ Generar documentaci√≥n

Toda API que se precie requiere una documentaci√≥n a medida y en eso FastAPI tambi√©n se lleva un muy buen punto a favor.

Por defecto, esta librer√≠a genera dos documentaciones muy limpias y bonitas

Una de ellas est√° en /redoc y la otra, algo m√°s cl√°sica, en /docs.

![Documentaci√≥n autom√°tica](/blog/python-fastapi/documentacion.png)

Puedes entrar al repositorio de dicha API en mi [GitHub](https://github.com/fcoterroba/ShinChanAPI)!

## üèÅ FIN DEL POST üèÅ

Y esto ha sido todo por hoy. Gracias por llegar hasta el final, espero que os haya servido y gustado. Nos vemos pronto!

Pod√©is contribuir econ√≥micamente mediante [Paypal](https://www.paypal.com/paypalme/fcoterroba). Toda cantidad es bien recibida! üôÇ

Espero tambi√©n que teng√°is una genial semana y nos vemos por aqu√≠ dentro de poquito! Un saludo y recuerda seguirme en las redes como [Twitter](https://twitter.com/fcoterroba), [Facebook](https://www.facebook.com/fcoterroba), [Instagram](https://www.instagram.com/fcoterroba/), [GitHub](https://www.github.com/fcoterroba), [LinkedIn](https://www.linkedin.com/in/fcoterroba/) y ahora tambi√©n en [TikTok](https://us.tiktok.com/@fcoterroba). ü§üüèª

*Fuentes: [Xataka.com](https://www.xataka.com/basics/api-que-sirve), [AWS.amazon.com](https://aws.amazon.com/es/what-is/python/), [sngular.com](https://www.sngular.com/es/fastapi-como-construir-una-api-con-python-en-una-media-hora/), [coffeebytes.dev](https://coffeebytes.dev/python-fastapi-el-mejor-framework-de-python/), [w3schools.com](https://www.w3schools.com/w3css/w3css_templates.asp)*
