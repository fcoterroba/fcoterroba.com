---
import BaseLayout from '../layouts/BaseLayout.astro';
import experienceData from '../data/experience.json';
---

<BaseLayout 
  title="portfolio - Francisco Terroba"
  description="Explore my educational background and professional experience as a software engineer, writer, and product builder."
  lang="en"
>
  <div>
    <section class="py-20 sm:py-32 theme-bg">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-12">
        <div class="text-center mb-12 sm:mb-16">
          <h2 class="text-3xl sm:text-4xl lg:text-6xl font-bold theme-text mb-6 sm:mb-8" data-es="formaciÃ³n acadÃ©mica" data-en="academic background">
            academic background
          </h2>
        </div>

        <div class="w-full">
          <div class="bg-white rounded-2xl p-6 sm:p-8 lg:p-12 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 education-card" id="education-box">
            <div class="text-center mb-8">
              <div class="w-20 h-20 bg-gradient-to-br from-brand-green/20 to-brand-light/30 rounded-2xl mb-6 flex items-center justify-center mx-auto">
                <span class="text-3xl">ðŸŽ“</span>
              </div>
              <h3 class="text-2xl lg:text-3xl font-bold theme-text mb-4" data-es="mi pasiÃ³n por la informÃ¡tica" data-en="my passion for computer science">
                my passion for computer science
              </h3>
            </div>
            
            <div class="prose prose-lg max-w-none theme-text-80 leading-relaxed">
              <p class="text-lg mb-6" data-es="me enamorÃ© de la informÃ¡tica desde los 5 aÃ±os. con 16 estudiÃ© la fpb de informÃ¡tica, luego el grado medio y por Ãºltimo el superior de desarrollo web. a dÃ­a de hoy, lentamente, mientras compagino las decenas de proyectos que tengo, me estoy sacando la carrera de ingenierÃ­a informÃ¡tica." data-en="i fell in love with computer science at the age of 5. at 16 i studied the fpb of computer science, then the intermediate degree and finally the higher degree in web development. today, slowly, while juggling the dozens of projects i have, i'm getting my computer engineering degree.">
                i fell in love with computer science at the age of 5. at 16 i studied the fpb of computer science, then the intermediate degree and finally the higher degree in web development. today, slowly, while juggling the dozens of projects i have, i'm getting my computer engineering degree.
              </p>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <div class="text-center p-4 bg-gradient-to-br from-brand-green/5 to-brand-light/10 rounded-xl">
                  <h4 class="font-semibold theme-text mb-2" data-es="fp bÃ¡sica" data-en="basic fp">
                    basic fp
                  </h4>
                  <p class="text-sm theme-text-70" data-es="16 aÃ±os" data-en="16 years old">
                    16 years old
                  </p>
                </div>
                <div class="text-center p-4 bg-gradient-to-br from-brand-green/5 to-brand-light/10 rounded-xl">
                  <h4 class="font-semibold theme-text mb-2" data-es="grado medio" data-en="intermediate degree">
                    intermediate degree
                  </h4>
                  <p class="text-sm theme-text-70" data-es="desarrollo web" data-en="web development">
                    web development
                  </p>
                </div>
                <div class="text-center p-4 bg-gradient-to-br from-brand-green/5 to-brand-light/10 rounded-xl">
                  <h4 class="font-semibold theme-text mb-2" data-es="grado superior" data-en="higher degree">
                    higher degree
                  </h4>
                  <p class="text-sm theme-text-70" data-es="desarrollo web" data-en="web development">
                    web development
                  </p>
                </div>
              </div>
              
              <div class="mt-8 p-6 bg-gradient-to-r from-brand-green/10 to-brand-light/20 rounded-2xl border-l-4 border-brand-green">
                <p class="text-lg font-medium theme-text" data-es="actualmente cursando ingenierÃ­a informÃ¡tica mientras desarrollo proyectos profesionales" data-en="currently pursuing computer engineering while developing professional projects">
                  currently pursuing computer engineering while developing professional projects
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="py-32 bg-gradient-to-br from-brand-light to-brand-green/20">
      <div class="max-w-7xl mx-auto px-8 lg:px-12">
        <div class="text-center mb-20">
          <h2 class="text-4xl lg:text-6xl font-bold theme-text mb-8" data-es="experiencia profesional" data-en="professional experience">
            professional experience
          </h2>
          <p class="text-xl theme-text-70 max-w-3xl mx-auto" data-es="cada proyecto ha sido una oportunidad para aplicar mis conocimientos tÃ©cnicos y habilidades de comunicaciÃ³n para crear soluciones que realmente importan" data-en="every project has been an opportunity to apply my technical knowledge and communication skills to create solutions that truly matter">
            every project has been an opportunity to apply my technical knowledge and communication skills to create solutions that truly matter
          </p>
        </div>

        <div class="relative overflow-hidden">
          <div class="flex justify-center mb-8">
            <div class="flex space-x-2">
              <button id="prev-btn" class="w-10 h-10 bg-brand-green text-white rounded-full flex items-center justify-center hover:bg-brand-green/90 transition-colors">
                <span class="text-lg">â€¹</span>
              </button>
              <div id="slide-indicators" class="flex space-x-2">
                {experienceData.experiences.map((_, index) => (
                  <button 
                    class={`w-3 h-3 rounded-full slide-indicator ${index === 0 ? 'bg-brand-green active' : 'bg-gray-300'}`} 
                    data-slide={index}
                  ></button>
                ))}
              </div>
              <button id="next-btn" class="w-10 h-10 bg-brand-green text-white rounded-full flex items-center justify-center hover:bg-brand-green/90 transition-colors">
                <span class="text-lg">â€º</span>
              </button>
            </div>
          </div>

          <div id="experience-slider" class="experience-slider flex transition-transform duration-1000 ease-in-out">
            {experienceData.experiences.map((experience) => (
            <div class="w-full flex-shrink-0 px-4">
                <div class={`bg-gradient-to-br ${experience.gradient} dark:${experience.darkGradient} rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 max-w-4xl mx-auto`}>
                <div class="text-center mb-6">
                  <div class="w-16 h-16 bg-gradient-to-br from-brand-green/20 to-brand-light/30 rounded-xl mb-4 flex items-center justify-center mx-auto hover:scale-110 transition-transform">
                      {experience.link ? (
                        <a href={experience.link} target="_blank" rel="noopener noreferrer">
                          <img src={experience.logo} alt={experience.company} class="w-12 h-12 object-contain" />
                        </a>
                      ) : (
                        <img src={experience.logo} alt={experience.company} class="w-12 h-12 object-contain" />
                      )}
                  </div>
                    <h3 class="text-xl font-bold theme-text mb-2" data-es={experience.company} data-en={experience.company}>
                      {experience.company}
                  </h3>
                    <p class="text-sm theme-text-70" data-es={experience.position} data-en={experience.position}>
                      {experience.position}
                    </p>
                    <p class="text-xs theme-text-60" data-es={experience.period.es} data-en={experience.period.en}>
                      {experience.period.en}
                    </p>
                  </div>
                  <p class="text-sm theme-text-80 mb-6" data-es={experience.description.es} data-en={experience.description.en}>
                    {experience.description.en}
                </p>
                <div class="flex flex-col sm:flex-row items-center justify-between gap-4 mt-auto">
                  <div class="flex flex-wrap gap-2 justify-center sm:justify-start">
                      {experience.technologies.map((tech) => (
                        <img src={tech.icon} alt={tech.name} title={tech.name} class="w-8 h-8 tech-icon hover:scale-110 transition-transform cursor-help" />
                      ))}
                  </div>
                  
                  {experience.link && (
                    <a 
                      href={experience.link} 
                      target="_blank" 
                      rel="noopener noreferrer" 
                      class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-white/20 hover:bg-white/30 backdrop-blur-md border border-white/30 theme-text font-medium transition-all duration-300 hover:scale-105 group"
                    >
                      <span data-en="view website" data-es="visitar sitio">view website</span>
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                      </svg>
                    </a>
                  )}
                </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  </div>


  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Debug theme detection
      console.log('Portfolio page loaded');
      console.log('Current theme:', document.documentElement.getAttribute('data-theme'));
      console.log('Education box element:', document.getElementById('education-box'));
      
      // Check if dark mode CSS is being applied
      const educationBox = document.getElementById('education-box');
      if (educationBox) {
        const computedStyle = window.getComputedStyle(educationBox);
        console.log('Education box background color:', computedStyle.backgroundColor);
        console.log('Education box classes:', educationBox.className);
      }
      
      // Listen for theme changes
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
            console.log('Theme changed to:', document.documentElement.getAttribute('data-theme'));
            const educationBox = document.getElementById('education-box');
            if (educationBox) {
              const computedStyle = window.getComputedStyle(educationBox);
              console.log('Education box background after theme change:', computedStyle.backgroundColor);
            }
          }
        });
      });
      
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['data-theme']
      });
      const slider = document.getElementById('experience-slider');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const indicators = document.querySelectorAll('.slide-indicator');
      
      if (!slider || !prevBtn || !nextBtn) return;
      
      const slides = slider.children;
      let currentSlide = 0;
      const totalSlides = slides.length;
      let autoSlideInterval: ReturnType<typeof setInterval> | undefined;

      function updateSlider() {
        if (!slider) return;
        slider.style.transform = `translateX(-${currentSlide * 100}%)`;
        
        // Update indicators
        indicators.forEach((indicator, index) => {
          if (index === currentSlide) {
            indicator.classList.add('active', 'bg-brand-green');
            indicator.classList.remove('bg-gray-300');
          } else {
            indicator.classList.remove('active', 'bg-brand-green');
            indicator.classList.add('bg-gray-300');
          }
        });
      }

      function nextSlide() {
        currentSlide = (currentSlide + 1) % totalSlides;
        updateSlider();
      }

      function prevSlide() {
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        updateSlider();
      }

      function goToSlide(slideIndex: number) {
        currentSlide = slideIndex;
        updateSlider();
      }

      function startAutoSlide() {
        autoSlideInterval = setInterval(nextSlide, 10000); // 10 seconds
      }

      function stopAutoSlide() {
        if (autoSlideInterval) {
        clearInterval(autoSlideInterval);
        }
      }

      // Event listeners
      nextBtn.addEventListener('click', () => {
        nextSlide();
        stopAutoSlide();
        startAutoSlide();
      });

      prevBtn.addEventListener('click', () => {
        prevSlide();
        stopAutoSlide();
        startAutoSlide();
      });

      indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
          goToSlide(index);
          stopAutoSlide();
          startAutoSlide();
        });
      });

      // Start the automatic slider
      startAutoSlide();
    });
  </script>
</BaseLayout>
